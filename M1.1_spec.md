## Milestone 1.1 – Repo, CI, and Dev Scaffolding: Detailed Spec

- Repo layout:
  - Root files: `README.md`, `LICENSE`, `.gitignore`, `.editorconfig`, `Makefile`, `.pre-commit-config.yaml`, `docker-compose.dev.yml`
  - `backend/`: FastAPI app scaffold (`app/main.py`, `app/api/health.py`, `pyproject.toml`, `tests/`)
  - `frontend/`: Next.js app scaffold (`app/`, `pages/` or `app/` router, `package.json`, `tsconfig.json`, `eslint.config.js`, `tests/`)
  - `infra/` (optional): Dockerfiles, env samples (`.env.example`, `.env.development`)
  - `.github/workflows/ci.yml`
- Language/runtime versions:
  - Python 3.11.x, Node.js 20.x, pnpm or npm (team choice), PostgreSQL 15, Redis 7
- Quality/tooling baselines:
  - Backend: ruff, black, mypy, pytest; type hints required for public functions
  - Frontend: eslint (typescript, react), prettier, typescript strict, a lightweight test runner (vitest or jest)
  - Pre-commit hooks: ruff, black, eslint --max-warnings=0, prettier, end-of-file-fixer, trailing-whitespace
- Makefile targets (at root):
  - `make setup` → install tools (pre-commit install), create venv, install backend deps, install frontend deps
  - `make fmt` → black + ruff --fix + prettier
  - `make lint` → backend linters + frontend eslint
  - `make test` → `pytest -q` and `pnpm test`/`npm test`
  - `make up` → `docker compose -f docker-compose.dev.yml up -d`
  - `make down` → stop and clean
  - `make backend` → run FastAPI dev server
  - `make frontend` → run Next.js dev server
- Docker/dev environment:
  - `backend/Dockerfile`: python:3.11-slim, install with `pip install -r requirements.txt` or `uv`, run `uvicorn app.main:app --host 0.0.0.0 --port 8000`
  - `frontend/Dockerfile`: node:20-alpine, install, `next dev -p 3000`
  - `docker-compose.dev.yml`: services for postgres, redis, backend, frontend; healthchecks for deps
- Hello-world artifacts:
  - Backend endpoints: `GET /healthz` → {status: "ok"}, `GET /readyz`, `GET /version` (from env/commit)
  - Frontend: root page renders app title and live backend health status fetched from `/healthz`
- CI workflow (`.github/workflows/ci.yml`):
  - Triggers: on PR, push to `main`
  - Jobs:
    - Backend: setup-python, cache, install, ruff/black --check, mypy, pytest -q
    - Frontend: setup-node, cache, install, eslint, tsc --noEmit, unit tests
  - Required checks: backend-lint, backend-test, frontend-lint, frontend-test
- Branching & conventions:
  - Conventional Commits; required PRs to `main`; CODEOWNERS optional
  - PR template with checklist (lint, tests, docs updated)
- Secrets & envs:
  - `.env.example` committed; CI uses GitHub Secrets for any API keys (OpenAI optional at this milestone)
- Documentation:
  - Root `README.md` with quickstart (setup, run, test), architecture overview, and CI badges
- Acceptance validation steps:
  - Fresh clone: `make setup && make lint && make test` all pass locally
  - `make up` starts services; `curl http://localhost:8000/healthz` → 200
  - Frontend shows backend health indicator as "ok"
  - CI green on a sample PR touching both apps
